extends slides-base

mixin includeFile(slide, filename, highlight)
    if highlight
        script(id=filename, src='code/'+(slide||'.')+'/'+filename, type='application/octetstream', highlight=highlight)
    else
        script(id=filename, src='code/'+(slide||'.')+'/'+filename, type='application/octetstream')

mixin invisibleEditor(slide, files)
    xp-editor(style={display: 'none'})
        each file in files
            +includeFile(slide, file)

mixin previewTs
    xp-preview(runner='html-ts')

mixin previewFakeTs
    xp-preview(runner='html')

mixin previewHtml
    xp-preview(runner='html')

mixin expoSnack(id)
    div(data-snack-id=id, data-snack-platform="ios", data-snack-preview="true", data-snack-theme="light", style='height: 100%')
    +snackEmbed
    //div(id=id)
    //script.
    //    var div = document.createElement('div')
    //    div.dataset.snackId = '!{id}'
    //    div.dataset.snackPlatform = 'ios';
    //    div.dataset.snackPreview = true;
    //    div.dataset.snackTheme = 'light';
    //    document.getElementById('!{id}').appendChild(div)
    //    ExpoSnack.append(div)

block append head
    title
        block title
    script(src='http://xpla.org/static/js/slide_loader.3.0.0.js')

block body
    body.xp-slide
        block layout
        block annotations
            xp-annotations
